
# FastAPI

  

Table of contents

  

1. [Introduction](#introduction)

2. [Key Points](#key-points)

2.1. [Pros](#pros)

2.2. [Cons](#cons)

3. [Tutorial](#tutorial)

3.1. [Example](#example)

## Introduction

FastAPI is a modern, fast (high-performance), web framework for building APIs with Python 3.6+ based on standard Python type hints. It is built on top of *Starlette* for the web parts and *Pydantic* for the data parts.

FastAPI is designed to be easy to use and learn, and it is highly customizable. It provides automatic data validation and serialization, as well as automatic API documentation using OpenAPI and Swagger. It also supports background tasks, WebSockets, and many other features.

FastAPI is built on top of *asyncio*, which is a library for writing asynchronous code in Python. This means that FastAPI is fully asynchronous. It also makes it easy to use async/await syntax in your code, which is a more modern and readable way of writing asynchronous code in Python.

## Key points

### Pros

* **Great performance**: FastAPI is one of the fastest Python web frameworks. Only [Starlette](https://www.starlette.io/) and [Uvicorn](https://www.uvicorn.org/) are faster. Because of ASGI, FastAPI supports concurrency and asynchronous code by declaring the endpoints.
* **Built-in concurrency**: For concurrent programming, FastAPI simplifies concurrency by eliminating the need for an event loop or async/await management. The initial path function can then be specified as coroutines using async def and await specific locations by developers.
* **Dependency injection support**: This technique increases the modularity of the code and the scalability of the system by achieving inversion of control. FastAPI's path operation functions enable developers to declare relevant dependencies.
* **Built-in docs**: The documentation generated by FastAPI is useful. The documentation assists developers in explaining the software to others, simplifies the use of your backend by front-end engineers, and simplifies API endpoint testing.
* **Validation built-in**: Built-in data validation enables developers to omit proof and write more compact code. It detects incorrect data types and returns the underlying reasoning in JSON.

### Cons

* **Insufficient security**: FastAPI isn't secure. Instead, fastapi.security handles security. At the same time, it supports OAuth2.0.
* **Community**: Searching reveals few books, guidelines, or lessons. Growing popularity may change this in the future. Thus its community and educational materials are still modest.

## Tutorial

1. Install FastAPI by running the following command: `pip install fastapi`

  

2. Create a new Python file, and import FastAPI:

```python
from fastapi import FastAPI
```

3. Next, create a new FastAPI app by calling the FastAPI constructor and passing in the name of the current module (`__name__`):

```python
app = FastAPI()
```

4. Now that you have a FastAPI app, you can define decorators that can be accessed by users. To define a route, use the `@app.get` decorator and specify the URL pattern as the first argument. The function that will be called when that route is accessed is the argument to the decorator. For example:

```python
@app.get('/hello')

def hello():
	return 'Hello, World!'`
```

Finally, to execute the app, you just need to execute it with [uvicorn](https://www.uvicorn.org/):

```shell
uvicorn fastapi_example:app --port 8080
```

#### Get

In FastAPI, the `@app.get` decorator is used to bind a function to a specific URL route to a GET request.

```python
@app.get('/hello')
def hello():
	return 'Hello, World!'
```

#### Post

To create a route that accepts parameters in a FastAPI application, you can use the `Path` parameter type. This parameter type allows you to define variables in the URL path of the route, which can then be used as arguments for the associated function.

```python
@app.post('/hello/{name}')
def hello(name: str):
	return f'Hello, {name}!'`
```

To create a route that accepts JSON data in a FastAPI application, you can use the `Body` parameter type. This parameter type allows you to define the schema of the JSON data that the route should accept, and FastAPI will automatically validate and deserialize the data for you.

```python
from fastapi import FastAPI, Body
from pydantic import BaseModel

class Item(BaseModel):
    name: str

app = FastAPI()

@app.post("/names")
def create_item(item: Item = Body()):
	return f"Hello, {item.name}"
```

### Example

File is located [here](https://github.com/Carlosma7/awesome-python-api-framework/blob/main/src/fastapi_example.py).

```python
"""FastAPI program example to show a simple configuration."""

import logging
from fastapi import FastAPI

# Define flask app
app = FastAPI()

# Define level of logging and logger
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

# Just for testing
global names
names = []

# GET method: curl http://localhost:8080/names
@app.get('/names')
def get_names():
    """GET method that returns list of names."""
    return names


# POST method: curl -X POST -H "content-Type: application/json"
# -d '{"name": "Carlos"}' http://localhost:8080/add
@app.post('/add')
def add_name(item: dict):
    """POST method that adds a new name into list."""
    name = item.get('name')

    logger.info("Add new name '%s'", name)
    names.append(name)

    return 'Name added'


# DELETE method: curl -X DELETE -H "content-Type: application/json"
# -d '{"name": "Carlos"}' http://localhost:8080/remove
@app.delete('/remove')
def remove_name(item: dict):
    """DELETE method that removes a name from the list."""
    name = item.get('name')

    logger.info("Remove name '%s'", name)
    names.remove(name)

    return 'Name removed'
```

  

And you'll see the following (includes info after testing):

  

![Flask execution](https://github.com/Carlosma7/awesome-python-api-framework/blob/main/img/fastapi_execution.png)

  

Now, to test it we will do a small example with:

1. **POST** a new name.

2. **GET** to see list of names.

3. **POST** another name.

4. **GET** to see updated list of names.

5. **DELETE** to remove a name.

6. **GET** to see final list of names.

  

![Curl requests](https://github.com/Carlosma7/awesome-python-api-framework/blob/main/img/fastapi_curl.png)

